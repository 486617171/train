{"version":3,"sources":["components/hotItem/index.js","pages/popular/index.js","pages/popular/index.less"],"names":["HotItem","props","data","name","owner","stargazers_count","forks","open_issues","html_url","full_name","textConfig","icon","color","style","width","backgroundColor","marginTop","borderRadius","textAlign","index","src","avatar_url","alt","fontWeight","href","target","rel","padding","className","map","item","Popular","typeChange","state","currentType","setState","types","this","styles","container","display","height","lineHeight","justifyContent","fontSize","minWidth","cursor","onClick","type","Component","HotBox","throttle","func","delay","timer","context","args","arguments","setTimeout","apply","getLoadScrollData","e","page_nub","getData","total","scrollTimer","nextProps","a","clearTimeout","fetch","toLowerCase","then","res","json","total_count","items","length","pageStart","loadMore","hasMore","loader","flexWrap","id","Math","random","module","exports"],"mappings":"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","file":"static/js/7.d26f5ad7.chunk.js","sourcesContent":["export default function HotItem(props) {\r\n\r\n    const { name, owner, stargazers_count, forks, open_issues, html_url, full_name } = props.data;\r\n\r\n    const textConfig = [\r\n        { icon: 'fa fa-star', name: 'stars', data: stargazers_count, color: 'rgb(255, 215, 0)' },\r\n        { icon: 'fa fa-code-fork', name: 'forks', data: forks, color: 'rgb(129, 195, 245)' },\r\n        { icon: 'fa fa-warning', name: 'Open issues', data: open_issues, color: 'rgb(241, 138, 147)' },\r\n    ];\r\n\r\n    return <div style={{ width: '23%', backgroundColor: 'rgba(0, 0, 0, 0.08)', marginTop: '20px', borderRadius: '8px' }}>\r\n        <div style={{ textAlign: 'center' }}>\r\n            <h2>#{props.index + 1}</h2>\r\n            <img src={owner.avatar_url} alt=\"\" width=\"50%\" />\r\n            <p style={{ fontWeight: 600 }}><a href={html_url} target=\"_blank\" rel=\"noopener noreferrer\">{full_name}</a></p>\r\n        </div>\r\n        <div style={{ padding: '20px 40px' }}>\r\n            <div>\r\n                <i style={{ color: 'rgb(255, 191, 116)', width: '16px', textAlign: 'center' }} className=\"fa fa-user\"></i>\r\n                <a href={html_url} target=\"_blank\" rel=\"noopener noreferrer\">{name}</a>\r\n            </div>\r\n            {\r\n                textConfig.map(item => <div key={item.name}><i style={{ color: item.color, width: '16px', textAlign: 'center' }} className={item.icon}></i>{item.data + ' ' + item.name}</div>)\r\n            }\r\n        </div>\r\n    </div>\r\n}","import React, { Component } from 'react';\r\nimport styles from './index.less';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport HotItem from '../../components/hotItem';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\n\r\nexport default class Popular extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentType: 'All'\r\n        };\r\n        this.types = ['All', 'JavaScript', 'Ruby', 'Java', 'CSS'];\r\n    }\r\n\r\n    typeChange = (item) => {\r\n        if (item !== this.state.currentType) {\r\n            this.setState({\r\n                currentType: item\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { currentType } = this.state;\r\n        return (\r\n            <div className={styles.container}>\r\n                <div style={{ display: 'flex', height: '40px', lineHeight: '40px', width: '100%', justifyContent: 'center', fontSize: '18px' }}>\r\n                    {\r\n                        this.types.map(item => <div key={item} style={{ minWidth: '100px', textAlign: 'center' }}><span style={{ cursor: 'pointer', color: currentType === item ? '#1890ff' : '#000' }} onClick={() => { this.typeChange(item) }}>{item}</span></div>)\r\n                    }\r\n                </div>\r\n                <HotBox type={currentType} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass HotBox extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            type: this.props.type,\r\n            data: [],\r\n            total: 0,\r\n        };\r\n        this.page_nub = 1;\r\n        this.timer = null;\r\n        this.scrollTimer = null;\r\n    }\r\n\r\n    // 初始化获取数据\r\n    componentDidMount() {\r\n        this.getData(this.props.type);\r\n    }\r\n\r\n\r\n    throttle = (func, delay) => {\r\n        var timer = null;\r\n        return function () {\r\n            var context = this;\r\n            var args = arguments;\r\n            if (!timer) {\r\n                timer = setTimeout(function () {\r\n                    func.apply(context, args);\r\n                    timer = null;\r\n                }, delay);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 接收到props时触发 切换分类时先清除数据\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        this.page_nub = 1;\r\n        this.setState({\r\n            data: [],\r\n        })\r\n    }\r\n\r\n    // 切换分类时重新获取数据\r\n    async componentDidUpdate() {\r\n        if (this.state.type !== this.props.type) {\r\n            await this.getData(this.props.type);\r\n        }\r\n    }\r\n\r\n    // 获取数据\r\n    getData(type = '') {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n            this.timer = null;\r\n        }\r\n        this.timer = setTimeout(async () => {\r\n            const { total_count, items } = await fetch(`https://api.github.com/search/repositories?q=stars:%3E1+${type ? 'language:' + type.toLowerCase() : ''}&sort=stars&order=desc&type=Repositories&page=${this.page_nub}`).then(res => res.json()).then(res => res);\r\n            if(items && typeof items === 'object'){\r\n                this.setState({\r\n                    data: [...this.state.data, ...items],\r\n                    total: total_count,\r\n                    type: this.props.type,\r\n                });\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n    getLoadScrollData = (e) => {\r\n        this.page_nub = e;\r\n        this.getData();\r\n    }\r\n\r\n    render() {\r\n        const { data } = this.state;\r\n        return <div>\r\n            {\r\n                data?.length > 0 ? <InfiniteScroll\r\n                    pageStart={this.page_nub}\r\n                    loadMore={this.getLoadScrollData}\r\n                    hasMore={true || false}\r\n                    loader={<div className={styles.loader} key={0}><i className=\"fa fa-spin fa-spinner\" />Loading ...</div>}\r\n                >\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-around' }}>\r\n                        {\r\n                            data.map((item, index) => <HotItem key={item.id + Math.random()} data={item} index={index} />)\r\n                        }\r\n                    </div>\r\n                </InfiniteScroll> : <div className={styles.loader} key={0}><i className=\"fa fa-spin fa-spinner\" />Loading ...</div>\r\n            }\r\n        </div>\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"index_container__2N6Ow\",\"loader\":\"index_loader__1dii_\"};"],"sourceRoot":""}